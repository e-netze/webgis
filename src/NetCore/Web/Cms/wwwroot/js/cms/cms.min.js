var CMS=new function(){this.id="";this.appRootUrl="";var n=null;this.init=function(){n=new CMS.db};this.api=function(n,t,i,r){var f,u;if(t&&t.path&&(t.path.toLowerCase().indexOf("/__secrets")===0||t.path.toLowerCase().indexOf("__secrets")===0)){if(!CMS.secretsPasswordHash){CMS.password("Enter secrets password",function(u){if(u!==null){var f=CryptoJS.SHA512(("secrets:"+u).toString(CryptoJS.enc.Base64)).toString(CryptoJS.enc.Base64);CMS.api("verifysecretspassword",{id:t.id,pw:f},function(u){u.success===!0?(CMS.secretsPasswordHash=f,CMS.api(n,t,i,r)):CMS.alert("Error:"+u.errorMessage)})}});return}t.pw=CMS.secretsPasswordHash}f=new FormData;for(u in t)t.hasOwnProperty(u)&&t[u]!==null&&t[u]!==undefined&&f.append(u,t[u]);fetch("cms/"+n,{method:"POST",body:f}).then(function(n){return n.json()}).then(function(n){!n.success&&n.exception?r?r(n.exception):CMS.alert(n.exception):i(n)}).catch(function(n){r&&r(n)})};this.toAbsUrl=function(n){if(!n)return"";while(n.indexOf("/")===0)n=n.substr(1);var t=this.appRootUrl;if(t)while(t.lastIndexOf("/")===t.length-1)t=t.substr(0,t.length-1);return t+"/"+n};this.showModal=function(n,t,i,r){$("body").modalDialog({title:n,onLoad:t,onCommit:i,onClose:r})};this._consoleCloseButton;this.openConsole=function(n,t){$.ajax({url:CMS.appRootUrl+"/"+n,type:"get",success:function(n){CMS.showConsole(n,t)},error:function(){alert("Unbekannter Fehler ist aufgetreten")}})};this.showConsole=function(n,t){$("body").modalDialog({title:n.title,onLoad:function(t){CMS._consoleCloseButton=t.closest(".modaldialog-modal").find(".modaldialog-close").css("display","none");$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/console?procId="+n.procId+"&cmsId="+n.cmsId).appendTo(t)},onClose:t===!0?function(){document.location.reload()}:null})};this.consoleFinished=function(){this._consoleCloseButton.css("display","")};this.closeModal=function(n){$(n).modalDialog("Close")};this.commitModal=function(n){$(n).modalDialog("Commit")};this.makeSortable=function(n){n=$(n).addClass("sortable").get(0);var t=Sortable.create(n,{animation:150,ghostClass:"sorting",filter:".list-remove",onFilter:function(n){var i=t.closest(n.item);i&&i.parentNode.removeChild(i)},onSort:function(n){var t=[];$(n.target).children("li[data-path]").each(function(n,i){if(!$(i).hasClass("current")&&!$(i).hasClass("up")){var r=$(i).attr("data-path");t.push(r)}});CMS.api("nodeorder",{path:document.currentPath,nodes:JSON.stringify(t)},function(){updateContent(document.currentPath)},function(n){CMS.alert(n)})}});$(n).data("sortable",t)};this.destroySortable=function(n){var t=$(n).data("sortable");t&&(t.destroy(),$(n).data("sortable",null).removeClass("sortable"))};this.sortAlphabetic=function(n,t){var i=$(n).children("li[data-path]");i.sort(function(n,i){var r=$(n),u=$(i),f,e;return r.hasClass("up")?-1:u.hasClass("up")?1:(f=r.children(".title").text(),e=u.children(".title").text(),f.localeCompare(e)*(t?-1:1))});$(n).append(i)};this.updateContent=function(n){updateContent(n)};this.formData=function(n){return $(n).form("RefreshData").data("form-data")};this.hasFormErrors=function(n){return $(n).form("HasFormErrors").data("form-haserros")};this.refreshForm=function(n,t){return $(n).form("RefreshForm",{controls:t})};this.applyStyleSetters=function(n){var i,t;for(i in n)t=n[i],console.log("stylesetter",t.selector,$(t.selector).length),t.append===!0?$(t.selector).addClass(t.className):$(t.selector).removeClass(t.className)};this.navTreeData=function(n){return $(n).lazyNavTree("RefreshData").data("navtree-data")};this.propertyGridData=function(n){return $(n).propertyGrid("RefreshData").data("propertygrid-data")};this.toLazyNavTree=function(n,t,i,r){$(n).lazyNavTree({path:t,name:i,singleSelect:r})};this.secureNode=function(n,t){CMS.api("nodesecurity",{path:n,tagName:t},function(n){$("body").modalDialog({title:n.displayName,onLoad:function(t){t.form(n);n.styleSetters&&CMS.applyStyleSetters(n.styleSetters)}})},function(n){CMS.alert(n)})};this.alertException=function(n){CMS.alert("Fehler: "+(n.exception||"Unbekannter Fehler"),!0)};this.showHourglass=function(n){return $("body").hourglass({title:n})};this.hideHourglass=function(){return $("body").hourglass("Close")};this.removeAllDescriptions=function(n){n.descriptionPanel("RemoveAll")};this.hasUINavtree=function(){return $("#main-navtree").width()>0};this.alert=function(n){n=n||"Leider ist ein unbekannter Fehler aufgetreten";bootbox?(n=n.replace(/\n/g,"<br/>"),bootbox.alert(n)):alert(n)};this.message=function(n){bootbox?bootbox.alert(n):alert(n)};this.confirm=function(n,t){bootbox?bootbox.confirm(n,function(n){n===!0&&t()}):confirm(n)&&t()};this.password=function(n,t){bootbox?bootbox.prompt({title:n||"Enter password",inputType:"password",callback:t}):confirm(n)&&t()};this.showDeployDialog=function(){CMS.showModal("deploy",function(n){$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/"+CMS.id+"/deploy?iframe=true").appendTo(n)})};this.showExportDialog=function(){CMS.showModal("Export",function(n){$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/"+CMS.id+"/export").appendTo(n)})};this.showImportDialog=function(){CMS.showModal("Import",function(n){$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/"+CMS.id+"/import").appendTo(n)})};this.showClearDialog=function(){CMS.showModal("Clear",function(n){$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/"+CMS.id+"/clear").appendTo(n)})};this.showReloadSchemeDialog=function(){CMS.showModal("Reload Scheme",function(n){$("<iframe class='console-iframe'><\/iframe>").attr("src",CMS.appRootUrl+"/"+CMS.id+"/reloadscheme").appendTo(n)})};this.downloadFile=function(n){$("<iframe>").attr("src",CMS.appRootUrl+"/"+n).appendTo("body")};this.inIFrame=function(){try{return window.self!==window.top}catch(n){return!0}};this.addAutocompleteEvents=function(n){n.on({"typeahead:cursorchange":function(){},"typeahead:select":function(n,t){console.log(t)},"typeahead:open":function(){},keyup:function(n){n.keyCode===13&&$(this).typeahead("close")}}).typeahead({hint:!1,highlight:!1,minLength:0},{limit:Number.MAX_VALUE,"async":!0,displayKey:"value",source:function(n,t,i){var r=this.$el.closest(".cms-form"),u=CMS.formData(r),f=this.$el.closest(".input-container").attr("data-control-name");CMS.api("formautocomplete",{name:f,path:document.currentPath,id:CMS.id,data:JSON.stringify(u)},function(n){n=n.slice(0,60);i(n)})},templates:{empty:'<div class="tt-suggestion">\n<div class="tt-content">Keine Ergebnisse gefunden<\/div>\n<\/div>',suggestion:function(n){return"<div><div class='tt-content'>"+(n.thumbnail?"<img class='tt-img' src='"+n.thumbnail+"' />":"")+"<strong>"+n.suggested_text+"<\/strong>"+(n.subtext?"<br/><div>"+n.subtext+"<\/div>":"")+"<\/div >"}}})};this.addPin=function(t,i){n&&n.addPin(t,i,function(){console.log("stored...")})};this.removePin=function(t){n&&n.removePin(t,function(){console.log("removed...")})};this.allPins=function(t){n&&n.getAllPins(t)};this.loadSecretPlaceholders=function(n){CMS.api("secretplaceholders",{},function(t){n(t)},function(n){CMS.alert(n)})};this.encodeHtmlString=function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},JQueryExtentArguments,UI,CryptoJS;CMS.db=function(){"use strict";function n(n){var i,r=indexedDB.open(t,5);r.onupgradeneeded=function(){var n,t;console.log("upgradedb");n=r.result;n.objectStoreNames.contains("pins")||(t=n.createObjectStore("pins",{keyPath:"path",autoIncrement:!0}))};r.onerror=function(){console.log("web app not allowed to use IndexedDB?!")};r.onsuccess=function(t){i=t.target.result;i.onerror=function(n){console.log("Database error: "+n.srcElement.error)};n(i);i.close()}}if(!("indexedDB"in window)){console.log("This browser doesn't support IndexedDB");return}var t="cms-"+CMS.id,i=function(n){n};this.addPin=function(t,i,r){n(function(n){var u=n.transaction("pins","readwrite"),f=u.objectStore("pins"),e={path:i,name:t,created:(new Date).getTime()};return f.add(e).onsuccess=function(n){r&&r(n.target.result)},u.complete})};this.removePin=function(t,i){n(function(n){var r=n.transaction("pins","readwrite"),u=r.objectStore("pins");return u.delete(t).onsuccess=function(n){i&&i(n.target.result)},r.complete})};this.getAllPins=function(t,i){n(function(n){var r=n.transaction("pins","readwrite"),f=r.objectStore("pins"),u=f.getAll();return u.onsuccess=function(n){var i=[],r,u;for(r in n.target.result)u=n.target.result[r],i.push(u);t(i)},u.onerror=function(n){i&&i(n)},r.complete})}},function(n){var ut=function(){function n(){}return n}(),i,r,u,f,e,t,o,s,h,c,l,a,v,y,p,w,b,ft,k,d,g,nt,tt,it,rt;n.NavbarItem=ut;i=function(){function n(n){this.items=n}return n}();n.NavbarOptions=i;r=function(){function n(n,t){this.element=n;this.options=t;this.OnCreate()}return n.prototype.OnCreate=function(){var n,t,i;for($(this.element).empty().addClass("cms-navbar"),n=0;n<this.options.items.length;n++)t=this.options.items[n],i=$("<div>").addClass("item").attr("data-path",t.path).appendTo(this.element),$("<div><\/div>").text(t.name).addClass("text").appendTo(i),n>0&&n==this.options.items.length-1&&$("<div><\/div>").addClass("pin").data("pin-name",this.options.items[n-1].name+"/"+t.name).data("pin-path",t.path).appendTo(i).click(function(){CMS.addPin($(this).data("pin-name"),$(this).data("pin-path"))}),$("<div><\/div>").addClass("right").appendTo(i),this.CheckSize()},n.prototype.CheckSize=function(){var t=this.element.width(),n=0;this.element.children(".item").each(function(t,i){var r=$(i);r.hasClass("hidden")||(n+=r.width())});n>t&&(this.element.children(':not(".hidden")').first().addClass("hidden"),this.CheckSize())},n}();n.Navbar=r;u=function(){function n(){}return n}();n.PinListItem=u;f=function(){function n(n){this.items=n}return n}();n.PinListOptions=f;e=function(){function n(n,t){var i,r,u;this.element=n;this.options=t;i=this.element;i.hasClass("cms-navtree")||i.empty().addClass("cms-navtree");r=i.children(".pin-list-items");r.length===0&&(r=$("<div>").addClass("pin-list-items").appendTo(i));t.items?this.OnCreate(t.items):(u=this,CMS.allPins(function(n){u.OnCreate((n||[]).reverse())}))}return n.prototype.OnCreate=function(n){for(var i,u=this.element,r=u.children(".pin-list-items"),t=0;t<n.length;t++)i=n[t],r.children("[data-path='"+i.path+"']").length===0&&this.CreateListItem(r,i)},n.prototype.CreateListItem=function(n,t){n.removeClass("collapsed");var i=$("<div><div class='text'><span class='pin'>&nbsp;&nbsp;&nbsp;<\/span>&nbsp;"+CMS.encodeHtmlString(t.name)+"<\/div><div>").addClass("cms-pin-item item").attr("data-path",t.path).appendTo(n);i.click(function(){CMS.updateContent($(this).attr("data-path"))});i.find(".pin").click(function(n){n.stopPropagation();CMS.removePin($(this).closest(".cms-pin-item").attr("data-path"));$(this).closest(".cms-pin-item").remove()})},n}();n.PinList=e;t=function(){function n(){}return n}();n.NavtreeItem=t;o=function(){function n(n,t){this.items=n;this.nodes=t}return n}();n.NavtreeOptions=o;s=function(){function n(n,t){this.element=n;this.options=t;this.OnCreate()}return n.prototype.OnCreate=function(){var n=this.element,e,i,r,f,u;for(n.hasClass("cms-navtree")||n.empty().addClass("cms-navtree"),n.children(".cms-treenode-nodes").length===0&&$("<div>").addClass("cms-treenode-nodes").appendTo(n),i=0;i<this.options.items.length;i++)(e=this.options.items[i],f=this.FindTreeNode(n,e.path),f.length>0)||this.CreateTreeNode(n,e);for(i=0;i<this.options.nodes.length;i++)(r=this.options.nodes[i],r.hasChildren!==!1)&&(f=this.FindTreeNode(n,r.path),f.length==0&&(u=new t,u.name=r.aliasname,u.path=r.path,u.obsolete=r.obsolete,this.CreateTreeNode(n,u)));n.find(".cms-treenode.selected").removeClass("selected");this.options.path||(this.options.path="/");this.options.path.indexOf("/")!==0&&(this.options.path="/"+this.options.path);this.FindTreeNode(n,this.options.path).addClass("selected")},n.prototype.FindTreeNode=function(n,t){t||(t="/");return n.find(".cms-treenode[data-path='"+t+"']")},n.prototype.CreateTreeNode=function(n,t){for(var u,f=t.path.split("/"),i="",r=0,e=f.length;r<e;r++)i+=(i.length>1?"/":"")+f[r],(i===""||i.indexOf("/")!==0)&&(i="/"+i),u=this.FindTreeNode(n,i),u.length>0?n=u:(n.removeClass("collapsed"),n=$("<div><div class='text'><span class='plus'>&nbsp;&nbsp;&nbsp;<\/span>&nbsp;"+CMS.encodeHtmlString(t.name)+"<\/div><div>").addClass("cms-treenode collapsed").attr("data-path",i).appendTo(n.children(".cms-treenode-nodes")),t.obsolete===!0&&n.addClass("obsolete"),$("<div>").addClass("cms-treenode-nodes").appendTo(n),n.children(".text").children(".plus").click(function(n){var t=$(this).closest(".cms-treenode"),i;t.hasClass("collapsed")?(i=t.find(".cms-treenode-nodes").children(".cms-treenode"),i.length>0&&n.stopPropagation(),t.removeClass("collapsed")):(n.stopPropagation(),t.addClass("collapsed"))}))},n}();n.Navtree=s;h=function(){function n(){}return n}();n.ToolbarItem=h;c=function(){function n(){}return n}();n.ToolbarOptions=c;l=function(){function n(n,t){this.element=n;this.options=t;this.OnCreate()}return n.prototype.OnCreate=function(){var t,n,i;if($(this.element).empty().addClass("cms-toolbar"),this.options.tools)for(t=0;t<this.options.tools.length;t++)n=this.options.tools[t],i=$("<div>").addClass("tool "+n.action).attr("data-path",n.path).attr("data-name",n.name).attr("data-action",n.action).appendTo(this.element),$("<div>").text(n.prompt).addClass("text").appendTo(i)},n}();n.Toolbar=l;a=function(){function n(){}return n}();n.ContentNode=a;v=function(){function n(){}return n}();n.ContentNodeOptions=v;y=function(){function n(n,t){this.element=n;this.options=t;this.OnCreate()}return n.prototype.OnCreate=function(){var f,r,e,u,n,t,i;for($(this.element).empty().addClass("cms-content"),this.options.orderable&&$(this.element).addClass("orderable"),f=null,this.options.path&&(f=this.options.path.lastIndexOf("/")>0?this.options.path.substr(0,this.options.path.lastIndexOf("/")):""),r=$("<ul>").appendTo(this.element),f!==null&&(e=$("<li>").addClass("node").attr("data-name","..").attr("data-path",f).attr("data-haschildren","true").addClass("parent up").appendTo(r),$("<div>[..]<\/div>").addClass("title").appendTo(e)),u=0;u<this.options.nodes.length;u++)n=this.options.nodes[u],t=$("<li>").addClass("node").attr("data-name",n.name).attr("data-path",n.path).attr("data-haschildren",n.hasChildren.toString()).attr("data-searchitem",n.aliasname.toLocaleLowerCase()+" "+n.path).css({top:-u*40,left:0,opacity:0}).appendTo(r),n.hasChildren===!0&&t.addClass("parent"),n.obsolete===!0&&t.addClass("obsolete"),n.target!=null&&(t.addClass("link"),t.attr("data-target",n.target),n.isTargetValid===!1&&t.addClass("link-invalid")),n.hasContent===!0&&t.addClass("has-content"),n.isRecommended===!0&&t.addClass("is-recommended"),n.isRequired===!0&&t.addClass("is-required"),n.name==="."&&t.addClass("current"),i=$("<div>").addClass("node-tools").appendTo(t),$("<div>").addClass("node-menu").appendTo(i).click(function(n){n.stopPropagation();$(this).parent().toggleClass("expanded")}),n.isCopyable===!0&&($("<div>").addClass("node-copy").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),$("<div>").addClass("node-cut").appendTo(i).click(function(){$(this).parent().removeClass("expanded")})),n.isRefreshable===!0&&$("<div>").addClass("node-refresh").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),n.isDeletable===!0&&$("<div>").addClass("node-delete").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),n.target!=null&&$("<div>").addClass("node-target-properties").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),n.hasChildren===!0&&n.hasProperties===!0&&$("<div>").addClass("node-properties").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),$("<div>").addClass("node-security").addClass(n.hasSecurity===!0?"node-has-security":"").addClass(n.hasSecurityRestrictions===!0?"node-has-security-restrictions":"").addClass(n.hasSecurityExclusiveRestrictions===!0?"node-has-security-exclusive-restrictions":"").appendTo(i).click(function(){$(this).parent().removeClass("expanded")}),$("<div><\/div>").text(n.aliasname).addClass("title").appendTo(t),n.primaryproperty_value&&$("<div>").addClass("primary-property-value").text(n.primaryproperty_value).appendTo(t),n.target!=null?$("<div>").addClass("target").text("=> "+n.target).appendTo(t):n.path&&$("<div>").addClass("target").text(n.path).appendTo(t);this.options.orderable===!0&&CMS.makeSortable(r);setTimeout(function(){r.children("li").css({top:0,left:0,opacity:"inherit"})},0)},n}();n.ContentNodes=y;p=function(){function n(){}return n}();n.ModalDialogOptions=p;w=function(){function n(n,t,i){this.element=n;this.options=t;i?this[i].apply(this):this.OnCreate()}return n.prototype.OnCreate=function(){var i=$(".modaldialog-modal").length,u=$("<div>").addClass("modaldialog-blocker").appendTo(this.element),n,t,r,f,e,o,h,s;for(CMS.inIFrame()===!0&&u.addClass("iframed"),n=$("<div>").addClass("modaldialog-modal").data("options",this.options).css("margin-top",38*i).css("height","calc(100% - "+38*i+"px").css({top:-100,opacity:0}).appendTo(u),t=CMS.encodeHtmlString(this.options.title),r=0;r<i;r++)t="»&nbsp;"+t;if(f=$("<div>"+t+"<div>").addClass("modaldialog-title").appendTo(n),e=$("<div>").addClass("modaldialog-body").appendTo(n),this.options.onCommit&&(n.addClass("has-buttons"),o=$("<div>").addClass("modaldialog-buttons").appendTo(n),h=$("<button>Übernehmen<\/button>").addClass("modaldialog-button-commit").appendTo(o).click(function(){CMS.commitModal(this)})),s=$("<div>✖<\/div>").addClass("modaldialog-close").appendTo(f),s.click(function(){CMS.closeModal(this)}),this.options.onLoad)this.options.onLoad(e,n);setTimeout(function(){n.css({top:0,opacity:1})},0)},n.prototype.Close=function(){var n=this.GetModal(this.element),t=n.data("options");if(t&&t.onClose)t.onClose(n);n.closest(".modaldialog-blocker").remove()},n.prototype.Commit=function(){var t=this.GetModal(this.element),n=t.data("options");if(n&&n.onCommit)n.onCommit(this.element,t)},n.prototype.GetModal=function(n){return n.hasClass(".modaldialog-modal")?n:n.closest(".modaldialog-modal")},n}();n.ModalDialog=w;b=function(){function n(){}return n}();n.LazyNavTreeOptions=b;ft=function(){function n(){}return n}();k=function(){function n(n,t,i){this.element=n;this.options=t;i?this[i].apply(this):this.OnCreate()}return n.prototype.OnCreate=function(){this.element.addClass("cms-lazy-navtree");$("<div>").addClass("button-back").appendTo(this.element).click(function(){new n($(this).closest(".cms-lazy-navtree"),null,"Back")});$("<input readonly='readlony' name='path' type='text' />").appendTo(this.element);$("<div>").addClass("loading").appendTo(this.element);$("<ul>").addClass("navtree-list").data("singleSelect",this.options.singleSelect).data("data",[]).appendTo(this.element);var t=this;CMS.api("linknodes",{path:this.options.path,name:this.options.name},function(n){t.element.data("path","").data("rootnodes",n.treenodes);t.Refresh()},null)},n.prototype.Refresh=function(){var t=this.element.data("rootnodes"),e=this.element.data("path").toString().split("/"),o,f,i,u,r,s;for(o in e){if(f=e[o],!f||f==="")break;for(u in t)if(t[u].name==f){t=t[u].nodes;break}}this.element.find("input[name='path']").val(this.element.data("path"));this.element.children(".loading").remove();i=this.element.find("ul.navtree-list").empty();for(u in t)r=t[u],s=$("<li><\/li>").text(r.aliasname).attr("data-path",r.path).attr("data-name",r.name).addClass(r.nodes!=null?"parent":"").addClass(r.selectable===!0?"selectable":"").appendTo(i).click(function(){var t=$(this),i=t.closest("ul.navtree-list"),u,r;t.hasClass("selectable")&&(i.data("singleSelect")===!0?(u=t.hasClass("selected"),i.children(".selected").removeClass("selected"),i.data("data",[]),u||t.addClass("selected")):t.toggleClass("selected"),i.data("data")[t.attr("data-path")]=t.hasClass("selected"));t.hasClass("parent")&&(r=t.closest(".cms-lazy-navtree"),r.data("path",t.attr("data-path")),new n(r,null,"Refresh"))});i.children("li").length==1&&i.children("li").hasClass("parent")&&!i.children("li").hasClass("selectable")&&i.children("li").trigger("click")},n.prototype.Back=function(){for(var t=this.element.data("path"),r=null,i,u,n,e,o,s,f;;){i=t.lastIndexOf("/");i>0&&(t=t.substr(0,i));u=t.split("/");n=this.element.data("rootnodes");for(e in u){o=u[e];for(s in n)if(f=n[s],f.name==o){n=f.nodes;break}}if(n&&n.length>1){r=t;break}if(i<=0)break}r!=null&&(this.element.data("path",r),this.Refresh())},n.prototype.RefreshData=function(){var r=this.element,n=[],u=this.element.find("ul.navtree-list"),t=u.data("data");for(var i in t)t[i]===!0&&n.push(i);return r.data("navtree-data",n)},n}();n.LazyNavTree=k;d=function(){function n(){}return n}();n.HourglassOptions=d;g=function(){function n(n,t,i){this.element=n;this.options=t;i?this[i].apply(this):this.OnCreate()}return n.prototype.OnCreate=function(){var n=$("<div>").addClass("cms-hourglass-blocker").appendTo(this.element),t=$("<div>").addClass("loader").appendTo(n);t.html(this.options.title)},n.prototype.Close=function(){this.element.find(".cms-hourglass-blocker").remove()},n}();n.Hourglass=g;nt=function(){function n(){}return n}();n.DescriptionPanelOptions=nt;tt=function(){function n(n,t,i){this.element=n;this.options=t;i?this[i].apply(this):this.OnCreate()}return n.prototype.OnCreate=function(){var n=this.element.find(".cms-description-panel[data-id='"+this.options.id+"']"),t;n.length===0&&(n=$("<div>").addClass("cms-description-panel").attr("data-id",this.options.id).appendTo(this.element),t=$("<div>").addClass("cms-description-header").appendTo(n),$("<div>").addClass("cms-description-switcher").appendTo(t).click(function(){var n=$(this).closest(".cms-description-panel").toggleClass("collapsed");window.localStorage&&window.localStorage.setItem("cms-desc-"+n.attr("data-id"),n.hasClass("collapsed")?"0":"1")}),$("<div>").addClass("cms-description-content").appendTo(n));window.localStorage&&window.localStorage.getItem("cms-desc-"+this.options.id)==="0"&&n.addClass("collapsed");n.children(".cms-description-content").html(this.options.text)},n.prototype.RemoveAll=function(){this.element.find(".cms-description-panel").remove()},n}();n.DescriptionPanel=tt;it=function(){function n(){}return n}();n.SecretSelectorPanelOptions=it;rt=function(){function n(n,t,i){this.element=n;this.options=t;i?this[i].apply(this):this.OnCreate()}return n.prototype.OnCreate=function(){var i=$(this.element),t=i.children(".cms-toolbar"),n;t.length===0&&(t=$("<div>").addClass("cms-toolbar").insertBefore(i.children().first()));n=i.children(".secret-selector-list-conatiner");n.length===0&&(n=$("<div>").addClass("secret-selector-list-conatiner").insertAfter(t));n.empty();$("<div>").text("...").addClass("tool load-secrets").appendTo(t).click(function(){var n=$(this).parent().parent().find(".cms-secretselector-list");n.children().length>0?($(this).text("..."),n.empty()):($(this).text("X"),CMS.loadSecretPlaceholders(function(t){$.each(t,function(t,i){var r=$("<li>").addClass("cms-secretselector-list-item").appendTo(n).mouseout(function(){$(this).find(".tooltiptext").text("Copy placeholder")}).click(function(n){n.stopPropagation();var t=$(this).children(".text");navigator.clipboard.writeText(t.text());$(this).find(".tooltiptext").text("Copied: "+t.text().substr(0,20)+"...")});$("<span>").text(i).addClass("text").appendTo(r);$("<span>").addClass("tooltiptext").text("Copy placeholder").appendTo(r)})}))});$("<ul>").addClass("cms-secretselector-list").appendTo(n)},n}();n.SecretSelectorPanel=rt}(UI||(UI={}));JQueryExtentArguments=function(){function n(n){n.length!=0&&(this.method=typeof n[0]=="string"?n[0]:null,this.opts=this.method?n.length>1?n[1]:null:n[0])}return n}(),function(n,t){function i(n,i,r){var n=t.extend({},i,n);return this.each(function(){var i=n,u=t(this);r(u,i)})}if(!t)return!1;t.fn.extend({navbar:function(n){return i.apply(this,[n,new UI.NavbarOptions([{name:"root",path:""}]),function(n,t){return new UI.Navbar(n,t)}])},pinlist:function(n){return i.apply(this,[n,new UI.PinListOptions([]),function(n,t){return new UI.PinList(n,t)}])},navtree:function(n){return i.apply(this,[n,new UI.NavtreeOptions([],[]),function(n,t){return new UI.Navtree(n,t)}])},toolbar:function(n){return i.apply(this,[n,new UI.ToolbarOptions,function(n,t){return new UI.Toolbar(n,t)}])},contentNodes:function(n){return i.apply(this,[n,new UI.ContentNodeOptions,function(n,t){return new UI.ContentNodes(n,t)}])},modalDialog:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.ModalDialogOptions,function(t,i){return new UI.ModalDialog(t,i,n.method)}])},propertyGrid:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.PropertyGridOptions,function(t,i){return new UI.PropertyGrid(t,i,n.method)}])},form:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.FormOptions,function(t,i){return new UI.Form(t,i,n.method)}])},lazyNavTree:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.LazyNavTreeOptions,function(t,i){return new UI.LazyNavTree(t,i,n.method)}])},hourglass:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.HourglassOptions,function(t,i){return new UI.Hourglass(t,i,n.method)}])},descriptionPanel:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.DescriptionPanelOptions,function(t,i){return new UI.DescriptionPanel(t,i,n.method)}])},secretSelectorPanel:function(){var n=new JQueryExtentArguments(arguments);return i.apply(this,[n.opts,new UI.SecretSelectorPanelOptions,function(t,i){return new UI.SecretSelectorPanel(t,i,n.method)}])}})}(window,jQuery),function(n){var u=function(){function n(){}return n}(),t,i,r;n.PropertyGridItem=u;t=function(){function n(){}return n}();n.PropertyGridOptions=t;i=function(){function n(n,t,i){if(this.element=n,this.options=t,i)return this[i].apply(this);this.OnCreate()}return n.prototype.OnCreate=function(){var s,a,n,v,u,h,c,t,b,l,o,k,d;if(this.options.properties!=null){this.element.addClass("cms-propertygrid").attr("data-path",this.options.path).attr("data-subProperty",this.options.subProperty);s=$("<div><\/div>").css({height:0,overflow:"hidden"}).appendTo(this.element);$("<input type='text' value=''/>").appendTo(s);$("<input type='password' value=''/>").appendTo(s);for(a in this.options.properties){if(n=this.options.properties[a],n.isHidden===!0){v=$("<input type='hidden' name='"+n.name+"'>").appendTo(this.element);v.val(n.value);continue}var i=n.category,y=!1,p=!1;if(i.indexOf("~~")==0&&(i=i.substr(2),p=!0),i.indexOf("~")==0&&(i=i.substr(1),y=!0),u=this.element.find("div[data-category='"+i+"']"),u.length===0){u=$("<div>").addClass("propertygrid-category").attr("data-category",i).appendTo(this.element);var w=$("<div><\/div>").text(i).addClass("propertygrid-category-title").appendTo(u),g=$("<div>?<\/div>").addClass("info").appendTo(w).click(function(n){n.stopPropagation();$(this).closest(".propertygrid-category").toggleClass("description").find(".propertygrid-property-description").slideToggle()}),nt=$("<div>").addClass("propertygrid-category-body").appendTo(u);w.click(function(){$(this).closest(".propertygrid-category").toggleClass("collapsed");$(this).next(".propertygrid-category-body").slideToggle()})}y===!0&&u.addClass("collapsed").children(".propertygrid-category-body").css("display","none");p===!0&&u.addClass("obsolete");var f=$("<div>").addClass("propertygrid-property-wrapper").appendTo(u.find(".propertygrid-category-body")),tt=$("<div><div>").text(n.displayName).addClass("propertygrid-label").appendTo(f),e=$("<div>").addClass("propertygrid-value").appendTo(f);if(n.obsolete===!0&&f.addClass("obsolete"),n.domainValues!=null&&n.domainValues.length>0){h=$("<select name='"+n.name+"'>").appendTo(e);for(c in n.domainValues)$("<option value='"+n.domainValues[c]+"'><\/options>").text(n.domainValues[c]).appendTo(h);h.val(n.value)}else if(typeof n.value=="boolean")t=$("<input name='"+n.name+"' type='checkbox'>").appendTo(e),f.addClass("borderless"),t.prop("checked",n.value),n.readonly===!0&&t.attr("onclick","return false;");else if(jQuery.isArray(n.value))t=$("<input name='"+n.name+"' type='text' readonly='readonly'>").attr("data-clickable","true").appendTo(e),t.val(JSON.stringify(n.value)),t.data("val",n.value).data("displayname",n.displayName).click(function(){var n=new r($(this),$(this).data("displayname"),$(this).data("val"))});else{if(t=t=$("<input name='"+n.name+"' type='"+(n.isPassword===!0?"password":"text")+"' autocomplete='"+(n.isPassword===!0?"new-password":"false")+"'>").appendTo(e),t.val(n.value),n.isSecret&&n.value)t.css("display","none"),$("<button>").text("Show secret...").appendTo(e).click(function(){var n=$(this).parent().children("input");n.css("display")==="none"?(n.css("display",""),$(this).text("Hide secret...")):(n.css("display","none"),$(this).text("Show secret..."))});else if(n.isPassword===!0){t.on("change keyup input",function(){$(this).attr("type",$(this).val()&&$(this).val().toString().indexOf("{{secret-")===0&&$(this).val().toString().lastIndexOf("}}")===$(this).val().toString().length-2?"text":"password")});t.trigger("change")}(n.readonly===!0||n.isComplex===!0)&&t.attr("readonly","readonly")}if(n.description)for(b=$("<div>").addClass("propertygrid-property-description").appendTo(f),l=n.description.split("\n"),o=0;o<l.length;o++)b.append($("<p>").html(l[o]));n.hasEditor===!0?k=$("<div>...<\/div>").addClass("propertygrid-editor-button").attr("data-property",n.name).appendTo(f).click(function(n){n.stopPropagation();var i=$(this),t=$(this).closest(".cms-propertygrid"),u=CMS.propertyGridData(t),r=(t.attr("data-subProperty")?t.attr("data-subProperty")+".":"")+i.attr("data-property");CMS.api("NodePropertyEditor",{path:t.attr("data-path"),property:r,data:JSON.stringify(u)},function(n){$("body").modalDialog({title:n.displayName,onLoad:function(t){t.form(n)},onCommit:function(n,u){n.addClass("loading");var f=u.find(".cms-form"),e=CMS.formData(f);CMS.api("NodePropertyEditorCommit",{path:t.attr("data-path"),property:r,data:JSON.stringify(e)},function(r){if(n.removeClass("loading"),typeof r.value!="undefined"){var f=t.find("input[name='"+i.attr("data-property")+"'], select[name='"+i.attr("data-property")+"']");f.val(r.value)}CMS.closeModal(u)},function(t){n.removeClass("loading");alert(t||"Leider ist ein unbekannter Fehler aufgetreten")})}})},function(n){alert(n)})}):n.isComplex===!0&&(k=$("<div>...<\/div>").addClass("propertygrid-editor-button").attr("data-property",n.name).appendTo(f).click(function(n){n.stopPropagation();var i=$(this),t=$(this).closest(".cms-propertygrid"),u=CMS.propertyGridData(t),r=(t.attr("data-subProperty")?t.attr("data-subProperty")+".":"")+i.attr("data-property");CMS.api("NodeProperties",{path:t.attr("data-path"),subProperty:r,data:JSON.stringify(u)},function(n){$("body").modalDialog({title:n.displayName,onLoad:function(t){t.propertyGrid({properties:n.properties,path:n.path,subProperty:n.subProperty})},onCommit:function(n,u){n.addClass("loading");var f=u.find(".cms-propertygrid"),e=CMS.propertyGridData(f);CMS.api("NodePropertiesCommit",{path:t.attr("data-path"),subProperty:r,data:JSON.stringify(e)},function(r){if(n.removeClass("loading"),typeof r.value!="undefined"){var f=t.find("input[name='"+i.attr("data-property")+"'], select[name='"+i.attr("data-property")+"']");f.val(r.value)}CMS.closeModal(u)},function(t){n.removeClass("loading");alert(t||"Leider ist ein unbekannter Fehler aufgetreten")})}})},function(n){alert(n)})}));n.authTagName&&(d=$("<div><\/div>").addClass("propertygrid-auth-button").attr("data-authtag",n.authTagName).appendTo(f).click(function(n){n.stopPropagation();var t=$(this).closest(".cms-propertygrid");CMS.secureNode(t.attr("data-path"),$(this).attr("data-authtag"))}))}}},n.prototype.RefreshData=function(){var t=this.element,n=[];return t.find("input[name]").each(function(t,i){var r=$(i).attr("name");$(i).attr("type")=="checkbox"?n.push({name:r,value:$(i).is(":checked")}):n.push({name:r,value:$(i).val()})}),t.find("select[name]").each(function(t,i){var r=$(i).attr("name");n.push({name:r,value:$(i).val()})}),t.data("propertygrid-data",n)},n}();n.PropertyGrid=i;r=function(){function n(n,t,i){this.control=n;var r=this;CMS.showModal(t,function(n,t){var u,f;t.data("editor",r);var l=$("<input type='text' placeholder='neuer Wert...'>").css({width:"100%",borderRadius:"5px",border:"1px solid #ccc",padding:"5px"}).appendTo(n),e=95.99980799999999/.0254,a=$("<button>Hinzufügen<\/button>").appendTo(n).css({marginBottom:"10px"}).click(function(){var n=$(this).prev("input").val(),i="",t,r;n&&(n.toString().trim().indexOf("1:")===0?(t=parseFloat(n.toString().trim().substr(2)),i=n.toString().trim(),n=(t/e).toString()):(t=parseFloat(n.toString()),isNaN(t)||(i="1:"+(t*e).toFixed(0).toLocaleString())),r=$("<li class='array-element'><input type='text' /><div class='list-info-text'><\/div><span class='list-remove'>✖<\/span><\/li>").data("value",n).appendTo($(this).next("ul")),r.children("input").val(n),r.children(".list-info-text").text(i),$(this).prev("input").val(" "))}),s=$("<ul>").addClass("sortable-list").appendTo(n);for(u=0;u<i.length;u++){var h=i[u],c=parseFloat(h),o="";isNaN(c)||(o="1:"+(c*e).toFixed(0).toLocaleString());f=$("<li class='array-element'><\/li>").attr("title",o).appendTo(s);$("<input type='text' />").val(h).appendTo(f);$("<div class='list-info-text'><\/div>").text(o).appendTo(f);$("<span class='list-remove'>✖<\/span>").appendTo(f)}CMS.makeSortable(s)},function(n,t){var i=[];t.find("li.array-element").each(function(n,t){var u=$(t).children("input").val(),r;try{r=parseFloat(u);r==null||isNaN(r)||(u=r)}catch(f){}i.push(u)});t.data("editor").control.data("val",i).val(JSON.stringify(i));CMS.closeModal(t)},null)}return n}()}(UI||(UI={})),function(n){var r=function(){function n(){}return n}(),u=function(){function n(){}return n}(),f=function(){function n(){}return n}(),e=function(){function n(){}return n}(),o=function(){function n(){}return n}(),s=function(){function n(){}return n}(),h=function(){function n(){}return n}(),c=function(){function n(){}return n}(),l=function(){function n(){}return n}(),a=function(){function n(){}return n}(),v=function(){function n(){}return n}(),y=function(){function n(){}return n}(),p=function(){function n(){}return n}(),w=function(){function n(){}return n}(),i=function(){function n(){this.buttonClickMethod="ToolButtonClick"}return n}(),t;n.FormOptions=i;t=function(){function t(n,t,i){if(this.element=n,this.options=t,i)return this[i].apply(this);this.OnCreate()}return t.prototype.OnCreate=function(){this.element.empty().attr("data-path",this.options.path).attr("data-name",this.options.name).data("options",this.options).addClass("cms-form");var n=$("<div><\/div>").css({height:0,overflow:"hidden"}).appendTo(this.element);$("<input type='text' value=''/>").appendTo(n);$("<input type='password' value=''/>").appendTo(n);this.Parse(this.element,this.options.controls)},t.prototype.Parse=function(t,i){var w,b,bt,f,k,h,a,kt,y,o,it,e,c,rt,ct,ut,d,s,lt,ft,p,et,at,ot,st,vt,yt,g,l,pt,v,wt;if(i){for(w=0;w<i.length;w++){var r=i[w],u=null,nt=null,tt=!1,ht="click";if(r.type==="groupbox")b=r,u=$("<div>").addClass("cms-form-groupbox"+(b.collapsed===!0?" collapsed":"")).appendTo(t),bt=$("<div><div>").text(b.label).addClass("text").appendTo(u).click(function(){$(this).parent().toggleClass("collapsed");$(this).next(".body").slideToggle()}),nt=$("<div>").addClass("body").appendTo(u),b.collapsed===!0&&nt.css("display","none");else if(r.type==="input"||r.type==="inputpassword"||r.type==="inputautocomplete")f=r,u=this.InputContainer(f.label,f.required===!0).appendTo(t),k=$("<input type='"+(f.isPassword===!0?"password":"text")+"' placeholder='"+(f.placeholder===null||f.placeholder==="null"?"":f.placeholder)+"'' name='"+f.name+"'>").appendTo(u).data("control-options",f).val(f.value).on("blur",function(){n.Form.prototype.ModifyInput($(this))}),k.attr("autocomplete",f.isPassword===!0?"new-password":"false"),f.dependsFrom&&(h=t.closest(".cms-form").find("input[name='"+f.dependsFrom+"']"),h.length==0&&(h=t.closest(".cms-form").find("select[name='"+f.dependsFrom+"']")),h.length>0&&(h.data("dep-controls")?h.data("dep-controls").push(k):h.data("dep-controls",[k]),h.keyup(function(){n.Form.prototype.ModifyDependents($(this))}))),r.type==="inputautocomplete"&&CMS.addAutocompleteEvents(u.find("input"));else if(r.type==="textarea")a=r,u=this.InputContainer(a.label,a.required===!0).appendTo(t),kt=$("<textarea><\/textarea").attr("rows",a.rows).attr("name",a.name).html(a.value).appendTo(u);else if(r.type==="checkbox")y=r,$("<input type='checkbox' name='"+y.name+"'>").css("display","none").appendTo(t),u=$("<div>").addClass("cms-form-checkbox").appendTo(t),y.label&&u.text(y.label),u.click(function(n){n.stopPropagation();var t=$(this).toggleClass("checked"),i=t.prev("input[type='checkbox']");i.prop("checked",t.hasClass("checked"))}),y.value==="true"&&u.trigger("click");else if(r.type==="combobox"){if(o=r,u=this.InputContainer(o.label,o.required===!0).appendTo(t),it=$("<select name='"+o.name+"'>").appendTo(u),o.options)for(d in o.options)(s=o.options[d],s.value!==null||s.label!==null||o.options.length!==1)&&$("<option value='"+s.value+"'><\/option>").text(s.label).appendTo(it);o.value!=null&&it.val(o.value.toString());o.triggerOnChange===!0&&(tt=!0,ht="change")}else if(r.type==="listbox"){if(e=r,u=this.InputContainer(e.label,e.required===!0).appendTo(t),c=$("<ul>").addClass("cms-listbox").attr("name",e.name).data("multiSelect",e.multiSelect===!1?!1:!0).data("selectAndCommit",e.selectAndCommit===!0?!0:!1).appendTo(u),e.height&&(c.css("height",e.height),c.css("overflow","auto")),e.selectAndCommit===!0&&(rt=u.closest(".modaldialog-modal").find(".modaldialog-button-commit"),rt.length>0&&c.data("commit-button",rt.css("display","none"))),e.options){ct=$("<li>").addClass("menu").appendTo(c);$("<input placeholder='Element(e) suchen...'>").appendTo(ct).on("keyup",function(){function t(n,t){for(var i in t)if(n.indexOf(t[i])<0)return!1;return!0}var n=$(this).val().toString().toLocaleLowerCase(),i=n.split(" ");n===""?$("[data-searchitem]").css("display",""):$("[data-searchitem]").each(function(){$(this).css("display",t($(this).attr("data-searchitem"),i)?"":"none")})});e.multiSelect===!0&&(ut=$("<li>").addClass("menu").appendTo(c),$("<button>Alle auswählen<\/button>").appendTo(ut).click(function(){$(this).closest(".cms-listbox").children("li[data-value]").each(function(n,t){var i=$(t);i.css("display")!=="none"&&i.hasClass("selected")===!1&&i.trigger("click")})}),$("<button>Alle aufheben<\/button>").appendTo(ut).click(function(){$(this).closest(".cms-listbox").children("li[data-value]").each(function(n,t){var i=$(t);i.css("display")!=="none"&&i.hasClass("selected")===!0&&i.trigger("click")})}));for(d in e.options)s=e.options[d],lt=$("<li><\/li>").text(s.label).attr("data-searchitem",s.label.toLocaleLowerCase()).attr("data-value",s.value).appendTo(c).click(function(){var n=$(this).parent(),t;n.data("multiSelect")===!1&&n.children("li").removeClass("selected");$(this).toggleClass("selected");t=[];n.children("li.selected").each(function(n,i){t.push($(i).attr("data-value"))});n.data("val",t);n.data("selectAndCommit")===!0&&n.data("commit-button")&&n.data("commit-button").trigger("click")}),s.selected===!0&&lt.trigger("click")}}else if(r.type==="button"||r.type==="imagebutton"){switch(r.type){case"button":ft=r;u=$("<button><\/button>").text(ft.label).data("name",ft.name).appendTo(t);break;case"imagebutton":p=r;u=$("<div>").addClass("cms-form-imagebutton").css({width:p.width,height:p.height,backgroundImage:"url("+CMS.toAbsUrl(p.image)+")"}).data("name",p.name).appendTo(t)}tt=!0}else if(r.type=="securitybutton")et=r,u=$("<div>").addClass("cms-form-auth-button").attr("data-path",et.path).attr("data-authtag",et.authTag).appendTo(t).click(function(n){n.stopPropagation();CMS.secureNode($(this).attr("data-path"),$(this).attr("data-authtag"))});else if(r.type==="lazynavtree")at=r,u=$("<div>").appendTo(t),CMS.toLazyNavTree(u,this.options.path,this.options.name,at.singleSelect);else if(r.type==="infotext"){ot=r;u=$("<div>").addClass("info-text").css("background-color",ot.bgColor).appendTo(t);st=ot.text.split("\n");for(vt in st)$("<div>").text(st[vt]).appendTo(u)}else if(r.type==="label")g=r,u=$("<div>").html(g.label).addClass("cms-form-label").appendTo(t);else if(r.type==="sublabel")yt=r,u=$("<div>").html(yt.label).addClass("cms-form-sub-label").appendTo(t);else if(r.type==="heading")g=r,u=$("<div>").html(g.label).addClass("cms-form-heading").appendTo(t);else if(r.type==="table"){if(l=r,u=$("<table>").addClass("cms-form-table").appendTo(t),l.headers)for(pt=$("<tr>").appendTo(u),v=0;v<l.headers.length;v++)wt=$("<th>").html(l.headers[v]).appendTo(pt),l.columnWidths&&l.columnWidths.length>v&&wt.css("width",l.columnWidths[v])}else u=r.type==="table.row"?$("<tr>").addClass("cms-form-table").appendTo(t):r.type==="table.cell"?$("<td>").addClass("cms-form-table").appendTo(t):t;if(r.name&&u.attr("data-control-name",r.name),tt===!0||r.isClickable===!0)u.data("clickMethod",this.options.buttonClickMethod).data("btn",r.name).on(ht,function(){var n=$(this),r;n.addClass("loading");var t=n.closest(".cms-form"),u=t.attr("data-path"),i=t.attr("data-name"),f=n.data("name")||n.data("btn");i==="~"&&(i=n.parent().closest("*[data-control-name]").attr("data-control-name"));r=CMS.formData(t);CMS.api(n.data("clickMethod"),{path:u,name:i,btn:f,data:JSON.stringify(r)},function(i){i&&(i.controls&&CMS.refreshForm(t,i.controls),i.styleSetters&&CMS.applyStyleSetters(i.styleSetters));n.removeClass("loading")},function(t){n.removeClass("loading");CMS.alert(t)})});r.visible===!1&&u.get(0)!==this.element.get(0)&&u.css("display","none");r.enabled===!1&&(u.find("input").attr("readonly","readonly"),u.find("select").attr("readonly","readonly"),u.find("textarea").attr("readonly","readonly"));u&&r.controls&&this.Parse(nt||u,r.controls)}this.element.find(".input-container input").on("keyup",function(){n.Form.prototype.SetRequiredFieldStyles($(this))});this.element.find(".input-container select").on("change",function(){n.Form.prototype.SetRequiredFieldStyles($(this))})}},t.prototype.SetRequiredFieldStyles=function(n){var t=n.closest(".input-container");t.hasClass("required")&&(n.val()?t.addClass("hasvalue").removeClass("error"):t.removeClass("hasvalue").addClass("error"))},t.prototype.InputContainer=function(n,t){var i=$("<div>").addClass("input-container");return t===!0&&i.addClass("required"),$("<div><\/div>").text(n).addClass("label").appendTo(i),i},t.prototype.RefreshForm=function(){var s,h,t,c,l,u,i,e,o,f,r,a;if(this.options.controls){if(this.options.controls.length==1&&this.options.controls[0].name&&this.options.controls[0].name==this.element.attr("data-control-name")){s=this.options.controls[0].controls;this.options=this.element.data("options");this.element.empty();this.Parse(this.element,s);return}for(h in this.options.controls)if(t=this.options.controls[h],t.type==="input")c=t,i=this.element.find("input[name='"+t.name+"']"),i.val(c.value),n.Form.prototype.SetRequiredFieldStyles(i);else if(t.type==="textarea")l=t,i=this.element.find("textarea[name='"+t.name+"']"),i.val(l.value),n.Form.prototype.SetRequiredFieldStyles(i);else if(t.type==="combobox"){if(u=t,i=this.element.find("select[name='"+t.name+"']").empty(),u.options)for(f in u.options)r=u.options[f],$("<option value='"+r.value+"'><\/option>").text(r.label).appendTo(i);i.val(u.value).trigger("change")}else if(t.type==="listbox"){e=t;o=this.element.find(".cms-listbox[name='"+t.name+"']");o.children("li[data-value]").remove();for(f in e.options)r=e.options[f],a=$("<li><\/li>").text(r.label).attr("data-searchitem",r.label.toLocaleLowerCase()).attr("data-value",r.value).appendTo(o).click(function(){var n=$(this).parent(),t;n.data("multiSelect")===!1&&n.children("li").removeClass("selected");$(this).toggleClass("selected");t=[];n.children("li.selected").each(function(n,i){t.push($(i).attr("data-value"))});n.data("val",t);n.data("selectAndCommit")===!0&&n.data("commit-button")&&n.data("commit-button").trigger("click")}),r.selected===!0&&a.trigger("click")}}},t.prototype.RefreshData=function(){var i=this.element,t=[];return i.find("input[name]").each(function(i,r){var u=$(r).attr("name");$(r).attr("type")=="checkbox"?t.push({name:u,value:n.Form.prototype.VerifyInputValue($(r),$(r).is(":checked"))}):t.push({name:u,value:n.Form.prototype.VerifyInputValue($(r),$(r).val())})}),i.find("textarea[name]").each(function(i,r){var u=$(r).attr("name");t.push({name:u,value:n.Form.prototype.VerifyInputValue($(r),$(r).val())})}),i.find("select[name]").each(function(i,r){var u=$(r).attr("name");t.push({name:u,value:n.Form.prototype.VerifyInputValue($(r),$(r).val())})}),i.find(".cms-listbox").each(function(i,r){var u=$(r).attr("name");t.push({name:u,value:n.Form.prototype.VerifyInputValue($(r),JSON.stringify($(r).data("val")))})}),i.data("form-data",t)},t.prototype.HasFormErrors=function(){var n=this.element;return n.data("form-haserros",n.find(".input-container.error").length>0)},t.prototype.VerifyInputValue=function(n,t){var i=n.closest(".input-container");if(i.length!=0||n.attr("type")==="checkbox")return!t&&i.hasClass("required")?i.addClass("error"):i.removeClass("error"),t},t.prototype.ModifyInput=function(t){var i=t.val(),r=t.data("control-options"),f,e,o,u,s;if(r.modifyMethods)for(f in r.modifyMethods)e=r.modifyMethods[f],i=i[e]();if(r.regexReplace)for(o in r.regexReplace)for(u=r.regexReplace[o],s=new RegExp(u.key);s.test(i);)i=i.replace(new RegExp(u.key),u.value);t.val(i);n.Form.prototype.SetRequiredFieldStyles(t)},t.prototype.ModifyDependents=function(n){var i=n.data("dep-controls"),r,t;for(r in i)t=i[r],t.val(n.val()),this.ModifyInput(t)},t}();n.Form=t}(UI||(UI={}));CryptoJS=CryptoJS||function(n,t){var u={},f=u.lib={},o=function(){},i=f.Base={extend:function(n){o.prototype=this;var t=new o;return n&&t.mixIn(n),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}},r=f.WordArray=i.extend({init:function(n,i){n=this.words=n||[];this.sigBytes=i!=t?i:4*n.length},toString:function(n){return(n||l).stringify(this)},concat:function(n){var i=this.words,r=n.words,u=this.sigBytes,t;if(n=n.sigBytes,this.clamp(),u%4)for(t=0;t<n;t++)i[u+t>>>2]|=(r[t>>>2]>>>24-8*(t%4)&255)<<24-8*((u+t)%4);else if(65535<r.length)for(t=0;t<n;t+=4)i[u+t>>>2]=r[t>>>2];else i.push.apply(i,r);return this.sigBytes+=n,this},clamp:function(){var i=this.words,t=this.sigBytes;i[t>>>2]&=4294967295<<32-8*(t%4);i.length=n.ceil(t/4)},clone:function(){var n=i.clone.call(this);return n.words=this.words.slice(0),n},random:function(t){for(var i=[],u=0;u<t;u+=4)i.push(4294967296*n.random()|0);return new r.init(i,t)}}),e=u.enc={},l=e.Hex={stringify:function(n){var u=n.words,i,t,r;for(n=n.sigBytes,i=[],t=0;t<n;t++)r=u[t>>>2]>>>24-8*(t%4)&255,i.push((r>>>4).toString(16)),i.push((r&15).toString(16));return i.join("")},parse:function(n){for(var i=n.length,u=[],t=0;t<i;t+=2)u[t>>>3]|=parseInt(n.substr(t,2),16)<<24-4*(t%8);return new r.init(u,i/2)}},s=e.Latin1={stringify:function(n){var r=n.words,i,t;for(n=n.sigBytes,i=[],t=0;t<n;t++)i.push(String.fromCharCode(r[t>>>2]>>>24-8*(t%4)&255));return i.join("")},parse:function(n){for(var i=n.length,u=[],t=0;t<i;t++)u[t>>>2]|=(n.charCodeAt(t)&255)<<24-8*(t%4);return new r.init(u,i)}},a=e.Utf8={stringify:function(n){try{return decodeURIComponent(escape(s.stringify(n)))}catch(t){throw Error("Malformed UTF-8 data");}},parse:function(n){return s.parse(unescape(encodeURIComponent(n)))}},h=f.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(n){"string"==typeof n&&(n=a.parse(n));this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(t){var f=this._data,s=f.words,u=f.sigBytes,e=this.blockSize,o=u/(4*e),o=t?n.ceil(o):n.max((o|0)-this._minBufferSize,0),i;if(t=o*e,u=n.min(4*t,u),t){for(i=0;i<t;i+=e)this._doProcessBlock(s,i);i=s.splice(0,t);f.sigBytes-=u}return new r.init(i,u)},clone:function(){var n=i.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),c;return f.Hasher=h.extend({cfg:i.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){h.reset.call(this);this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){return n&&this._append(n),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,i){return new n.init(i).finalize(t)}},_createHmacHelper:function(n){return function(t,i){return new c.HMAC.init(n,i).finalize(t)}}}),c=u.algo={},u}(Math),function(n){var t=CryptoJS,r=t.lib,i=r.Base,u=r.WordArray,t=t.x64={};t.Word=i.extend({init:function(n,t){this.high=n;this.low=t}});t.WordArray=i.extend({init:function(t,i){t=this.words=t||[];this.sigBytes=i!=n?i:8*t.length},toX32:function(){for(var i,r=this.words,f=r.length,n=[],t=0;t<f;t++)i=r[t],n.push(i.high),n.push(i.low);return u.create(n,this.sigBytes)},clone:function(){for(var r=i.clone.call(this),t=r.words=this.words.slice(0),u=t.length,n=0;n<u;n++)t[n]=t[n].clone();return r}})}(),function(){function n(){return t.create.apply(t,arguments)}for(var u=CryptoJS,f=u.lib.Hasher,i=u.x64,t=i.Word,o=i.WordArray,i=u.algo,s=[n(1116352408,3609767458),n(1899447441,602891725),n(3049323471,3964484399),n(3921009573,2173295548),n(961987163,4081628472),n(1508970993,3053834265),n(2453635748,2937671579),n(2870763221,3664609560),n(3624381080,2734883394),n(310598401,1164996542),n(607225278,1323610764),n(1426881987,3590304994),n(1925078388,4068182383),n(2162078206,991336113),n(2614888103,633803317),n(3248222580,3479774868),n(3835390401,2666613458),n(4022224774,944711139),n(264347078,2341262773),n(604807628,2007800933),n(770255983,1495990901),n(1249150122,1856431235),n(1555081692,3175218132),n(1996064986,2198950837),n(2554220882,3999719339),n(2821834349,766784016),n(2952996808,2566594879),n(3210313671,3203337956),n(3336571891,1034457026),n(3584528711,2466948901),n(113926993,3758326383),n(338241895,168717936),n(666307205,1188179964),n(773529912,1546045734),n(1294757372,1522805485),n(1396182291,2643833823),n(1695183700,2343527390),n(1986661051,1014477480),n(2177026350,1206759142),n(2456956037,344077627),n(2730485921,1290863460),n(2820302411,3158454273),n(3259730800,3505952657),n(3345764771,106217008),n(3516065817,3606008344),n(3600352804,1432725776),n(4094571909,1467031594),n(275423344,851169720),n(430227734,3100823752),n(506948616,1363258195),n(659060556,3750685593),n(883997877,3785050280),n(958139571,3318307427),n(1322822218,3812723403),n(1537002063,2003034995),n(1747873779,3602036899),n(1955562222,1575990012),n(2024104815,1125592928),n(2227730452,2716904306),n(2361852424,442776044),n(2428436474,593698344),n(2756734187,3733110249),n(3204031479,2999351573),n(3329325298,3815920427),n(3391569614,3928383900),n(3515267271,566280711),n(3940187606,3454069534),n(4118630271,4000239992),n(116418474,1914138554),n(174292421,2731055270),n(289380356,3203993006),n(460393269,320620315),n(685471733,587496836),n(852142971,1086792851),n(1017036298,365543100),n(1126000580,2618297676),n(1288033470,3409855158),n(1501505948,4234509866),n(1607167915,987167468),n(1816402316,1246189591)],r=[],e=0;80>e;e++)r[e]=n();i=i.SHA512=f.extend({_doReset:function(){this._hash=new o.init([new t.init(1779033703,4089235720),new t.init(3144134277,2227873595),new t.init(1013904242,4271175723),new t.init(2773480762,1595750129),new t.init(1359893119,2917565137),new t.init(2600822924,725511199),new t.init(528734635,4215389547),new t.init(1541459225,327033209)])},_doProcessBlock:function(n,t){for(var y,a,i,f=this._hash.words,g=f[0],nt=f[1],tt=f[2],it=f[3],rt=f[4],ut=f[5],ft=f[6],f=f[7],ti=g.high,et=g.low,ii=nt.high,ot=nt.low,ri=tt.high,st=tt.low,ui=it.high,ht=it.low,fi=rt.high,ct=rt.low,ei=ut.high,lt=ut.low,oi=ft.high,at=ft.low,si=f.high,vt=f.low,c=ti,e=et,yt=ii,b=ot,pt=ri,k=st,hi=ui,wt=ht,l=fi,o=ct,gt=ei,bt=lt,ni=oi,kt=at,ci=si,dt=vt,h=0;80>h;h++){if(y=r[h],16>h)a=y.high=n[t+2*h]|0,i=y.low=n[t+2*h+1]|0;else{var a=r[h-15],i=a.high,v=a.low,a=(i>>>1|v<<31)^(i>>>8|v<<24)^i>>>7,v=(v>>>1|i<<31)^(v>>>8|i<<24)^(v>>>7|i<<25),d=r[h-2],i=d.high,u=d.low,d=(i>>>19|u<<13)^(i<<3|u>>>29)^i>>>6,u=(u>>>19|i<<13)^(u<<3|i>>>29)^(u>>>6|i<<26),i=r[h-7],li=i.high,p=r[h-16],w=p.high,p=p.low,i=v+i.low,a=a+li+(i>>>0<v>>>0?1:0),i=i+u,a=a+d+(i>>>0<u>>>0?1:0),i=i+p,a=a+w+(i>>>0<p>>>0?1:0);y.high=a;y.low=i}var li=l&gt^~l&ni,p=o&bt^~o&kt,y=c&yt^c&pt^yt&pt,vi=e&b^e&k^b&k,v=(c>>>28|e<<4)^(c<<30|e>>>2)^(c<<25|e>>>7),d=(e>>>28|c<<4)^(e<<30|c>>>2)^(e<<25|c>>>7),u=s[h],yi=u.high,ai=u.low,u=dt+((o>>>14|l<<18)^(o>>>18|l<<14)^(o<<23|l>>>9)),w=ci+((l>>>14|o<<18)^(l>>>18|o<<14)^(l<<23|o>>>9))+(u>>>0<dt>>>0?1:0),u=u+p,w=w+li+(u>>>0<p>>>0?1:0),u=u+ai,w=w+yi+(u>>>0<ai>>>0?1:0),u=u+i,w=w+a+(u>>>0<i>>>0?1:0),i=d+vi,y=v+y+(i>>>0<d>>>0?1:0),ci=ni,dt=kt,ni=gt,kt=bt,gt=l,bt=o,o=wt+u|0,l=hi+w+(o>>>0<wt>>>0?1:0)|0,hi=pt,wt=k,pt=yt,k=b,yt=c,b=e,e=u+i|0,c=w+y+(e>>>0<u>>>0?1:0)|0}et=g.low=et+e;g.high=ti+c+(et>>>0<e>>>0?1:0);ot=nt.low=ot+b;nt.high=ii+yt+(ot>>>0<b>>>0?1:0);st=tt.low=st+k;tt.high=ri+pt+(st>>>0<k>>>0?1:0);ht=it.low=ht+wt;it.high=ui+hi+(ht>>>0<wt>>>0?1:0);ct=rt.low=ct+o;rt.high=fi+l+(ct>>>0<o>>>0?1:0);lt=ut.low=lt+bt;ut.high=ei+gt+(lt>>>0<bt>>>0?1:0);at=ft.low=at+kt;ft.high=oi+ni+(at>>>0<kt>>>0?1:0);vt=f.low=vt+dt;f.high=si+ci+(vt>>>0<dt>>>0?1:0)},_doFinalize:function(){var i=this._data,n=i.words,r=8*this._nDataBytes,t=8*i.sigBytes;return n[t>>>5]|=128<<24-t%32,n[(t+128>>>10<<5)+30]=Math.floor(r/4294967296),n[(t+128>>>10<<5)+31]=r,i.sigBytes=4*n.length,this._process(),this._hash.toX32()},clone:function(){var n=f.clone.call(this);return n._hash=this._hash.clone(),n},blockSize:32});u.SHA512=f._createHelper(i);u.HmacSHA512=f._createHmacHelper(i)}(),function(){var n=CryptoJS,t=n.lib.WordArray;n.enc.Base64={stringify:function(n){var i=n.words,u=n.sigBytes,f=this._map,t,e,r;for(n.clamp(),n=[],t=0;t<u;t+=3)for(e=(i[t>>>2]>>>24-8*(t%4)&255)<<16|(i[t+1>>>2]>>>24-8*((t+1)%4)&255)<<8|i[t+2>>>2]>>>24-8*((t+2)%4)&255,r=0;4>r&&t+.75*r<u;r++)n.push(f.charAt(e>>>6*(3-r)&63));if(i=f.charAt(64))for(;n.length%4;)n.push(i);return n.join("")},parse:function(n){var e=n.length,f=this._map,i=f.charAt(64),o,s;i&&(i=n.indexOf(i),-1!=i&&(e=i));for(var i=[],u=0,r=0;r<e;r++)r%4&&(o=f.indexOf(n.charAt(r-1))<<2*(r%4),s=f.indexOf(n.charAt(r))>>>6-2*(r%4),i[u>>>2]|=(o|s)<<24-8*(u%4),u++);return t.create(i,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();
//# sourceMappingURL=cms.min.js.map